#An Analysis of Cinema's Great Directors
##Alexander Moore
##July 27, 2015

#Abstract
I analyze voting patterns of cinema experts in the Sight and Sound "The Greatest Films Poll." 

#Introduction
Every decade, the British Film Institute's (BFI) official film magazine, *Sight and Sound*, publishes a ranked list of the 250 films that the cinema establishment considers the greatest films of all time. The magazine polls a global sample of nearly 1000 critics, academics, directors, and other film experts and asks them simply to submit a list of 10 films that they consider the greatest ever. They then tabulate the votes in order to create their list.

When *Sight and Sound* published its most recent poll in 2012, it also created a website which publishes the 10 selections of each voter. This data can be found at this url: <http://explore.bfi.org.uk/sightandsoundpolls/2012/voter>. The site provides basic data on the voters and their selections. In my project, I have decided to take a closer look at this data to examine the voting patterns of these voters.


#The Data
The first step in this process was data collection. Since the data was not available in a readily downloadable or analyzable format, I created scripts which screen scraped and then formatted the data from the BFI website. In addition, I wanted more data on each of the selected movies. I turned to [The Open Movie Database API] (http://www.omdbapi.com/) in order to supplement the data provided by the BFI.

Below I have documented the data provided by the BFI and the corresponding column in the dataset.

###BFI Data
fName: Voter First Name
lName: Voter Last Name 
country: Voter country of origin
poll: Whether their vote is counted in the critics poll or the directors poll
selectionName: Name of movie voted for
selectionYear: Year of movie voted for

Next, I have documented the data provided by The Open Movie Database API (OMDBAPI) and the corresponding column in the dataset

###OMDBAPI Data
newName: Name of movie voted for in the OMDBAPI
rating: The rating of the movie
genre: The genre or genres of the movie
language: The language or languages used in the movie
country.1: The country or countries involved with the movie

Since the variables genre, language, and country often included multiple values per movie, these were converted into dummy variables with Python.

###Generated Dummy Variables
genre was divided into 28 dummy variables from Action to Western
language was divided into 125 dummy variables from Ancient (to 1453) to Zulu
country was divided into 94 dummy variables from Albania to Yugoslavia

The code used for gathering and cleaning the data is provided here. Most of the basic formatting and cleaning of the data was done in Python before the data was imported into R.


#Exploratory Analysis

###Basic Summary of Data

The first thing I did upon importing the data was to run a summary. I excluded the multitude of dummy variables.

```{r}
critic_data <- read.csv('dummies.csv', sep = ',')
core.data <- c("country", "poll", "newName",
               "selectionYear", "selectionDirector",
               "rating","genre","language","country.1")
summary(critic_data[core.data])
```
From this summary, we can see some interesting basic information which also serves as a basic confirmation that the data was downloaded and processed correctly up until this point.

First of all, from the summary of movies selection (newName), we can see that the top six values displayed here track closely with the top movies on the BFI website. There are slight differences since the BFI website separates the voters into a critics and a directors result whereas I have combined them into a single one. Still, we can see that the top three, Vertigo, Citizen Kane, and Tokyo Story are the same and that the other 3 movies have plausible rankings. 

By looking at the directors of the selected movies (selectionDirector) we can see that Alfred Hitchcock (director of the #1 ranked movie Vertigo) comes out on top with other film luminaries like Jean-Luc Godard, Orson Welles, and Yasujiro Ozu following behind. This output makes sense given that all of these top directors are generally considered the greatest directors in cinema. 

In general the other variables made sense as well, although the prominent blanks in both rating and language were somewhat worrying. Upon examining the raw data, it appears that these blanks are in fact the case. 

After this I also set up the following packages for later use
```{r message=FALSE, warning=FALSE}
library(ggplot2) #for making fancy graphs
library(dplyr) #for manipulating data
library(reshape2) #for reshaping data
library(RColorBrewer) #for a more robust set of color palettes
library(gridExtra) #for combining charts together
#omit NA
critic_data=na.omit(critic_data)
#creates a variable that aggregates the countries Germany and West Germany
critic_data$Germany.Aggregate <- 
  critic_data$Germany + critic_data$West.Germany
```
###Most critically acclaimed decade

The first thing I wanted to see was the distribution of votes across decades. I was curious to see what decades might be considered the greatest in cinema.



I started off by making a histogram with a bin width of 10 years so that each bar represents a decade
```{r}
ggplot(aes(x=selectionYear), 
       data=critic_data) +
  geom_histogram(binwidth=10, 
                 color="Black", 
                 fill="White")+
  ggtitle("Votes by decade")+
  ylab("Votes") +
  xlab("Decade")
```
We can see that there is a peak is in the 1960s which tapers off in both directions. Both the 1950s and 1970s have a significant number of votes. This result makes intuitive sense for several reasons. Newer movies are often considered too new to be considered classics and so we might expect there to be fewer votes for relatively new movies. For the earlier movies, the fact that there are simply not all that many movies to pick from may be a significant factor in there being fewer votes. This data seems to confirm the anecdotal evidence that movies in the 1950~1970 period are often held in high regard. 

I was also curious to see whether breaking this data down into the countries they were made in would show interesting trends. For example, did Germany have a golden age in the 1930s? How important was the 1960s to Italy?

In order to answer this kind of question, I had to do some data manipulation including creating the variable "decade" with the decade that a given movie was released in. The code is below.
```{r}
#creates a decade variable for future analysis
critic_data$decade <- 
  floor(critic_data$selectionYear/10)*10
table(critic_data$decade)
```
In the table above we can see a numerical version of the histogram that I created earlier. We can see that the 1960s have significantly more votes than the nearest competitor.

I also decided to make a boxplot of the data to get a better look.

Due to the presence of countries with a very small number of votes, I set an arbitrary threshold and filtered out the countries that had fewer than that number of votes

```{r}
#finds countries with over 100 votes
country_sums <- 
  colSums(Filter(is.numeric, critic_data),
          na.rm = TRUE, )
keep_vars <- names(country_sums[country_sums > 100])
a <- c("country","poll","selectionName","newName","rating","runtime")
keep_vars <- c(keep_vars, a)
#keeps variables with over 100 votes as well as variables with basic information
new_data <- critic_data[keep_vars]
```
I then aggregated the movie location vote counts for countries that met the 100 vote threshold by decade and then converted it from a wide to a long format

```{r}
#creates movie location vote counts by decade
decade_groups <- group_by(new_data, decade)
votesbyDecade<-summarise(decade_groups,
                         Canada = sum(Canada),
                         China = sum(China),
                         Denmark=sum(Denmark),
                         France =sum(France),
                         Germany = sum(Germany),
                         Hong.Kong = sum(Hong.Kong),
                         India = sum(India),
                         Iran = sum(Iran),
                         Italy = sum(Italy),
                         Japan = sum(Japan),
                         Mexico = sum(Mexico),
                         Ussr = sum(Soviet.Union),
                         Spain = sum(Spain),
                         Sweden = sum(Sweden),
                         Switzerland = sum(Switzerland),
                         Taiwan = sum(Taiwan),
                         UK = sum(UK),
                         USA = sum(USA),
                         West.Germany = sum(West.Germany),
                         Germany.Aggregate = sum(Germany.Aggregate))
#converts to long format for analysis
votesbyDecade.long <- melt(votesbyDecade, 
                           id.vars=c("decade"),
                           variable.name="country",
                           value.name="votes")
```
I then made a faceted graph of these countries.

```{r message=FALSE, warning=FALSE}
ggplot(aes(y=votes,
           x=decade),
       data=votesbyDecade.long)+
  geom_line() +
  facet_wrap(~country)+
  ggtitle("Votes by Decade and Country")
```

```{r message=FALSE, warning=FALSE}
with(votesbyDecade.long, 
     tapply(votes, list(country, decade), sum))
```
We can see that even in this top group, the number of movies is dominated by a few countries. These countries include USA, Japan, Italy, and France. In addition we can see that many countries encounter a distinct peak. Notable peaks include France and Italy in the 1960, Japan in the 1950s, and the USA in the 1950s and the 1970s. Each of these peaks seems to correspond with a few auteurs that worked in those decades. In France in the 1960s we have the French New Wave directors including luminaries such as Jean-Luc Godard and Francois Truffaut. In Italy in the 1960s, we have Frederico Fellini and Michaelangelo Antonioni. In the 1950s in the USA we have directors like Alfred Hitchcock, Billy Wilder, and Elia Kazan, and John Ford. The 1970s in the US we have Francis Ford Coppola and Martin Scorsese. Japan in the 1950s featured major works by Akira Kurosawa and Yasujiro Ozu.

Also, please note that in this chart, I have also created the country "Germany.Aggregate" which combines Germany and West Germany.

Upon seeing this chart, I realized that it was somewhat difficult to see the trends in countries with a relatively small number of votes so I converted the data into percentages within that country. 

```{r}
#group by country
country_groups <- 
  group_by(votesbyDecade.long, country)
#create a column of total votes by country
votesbyCountry <- 
  summarise(country_groups, Totals = sum(votes))
#convert absolute vote numbers into percentages for each country
country_percentages <- 
  merge(votesbyDecade.long, 
        votesbyCountry, 
        by="country")
country_percentages$percentages <- 
  (country_percentages$votes/country_percentages$Totals)*100
```

I then made another faceted graph which exchanged absolute values for percentages.
```{r  message=FALSE, warning=FALSE}
ggplot(aes(y=percentages,
           x=decade),
       data=country_percentages)+
  geom_line() +
  facet_wrap(~country)+
  ggtitle("Percent Votes by Decade and Country")
```

This analysis indicates that most countries seem to be dominated by one or two significant peaks in their history. This phenomenon could indicate the influence of one or two auteurs dominating the movie scene of that country or perhaps a particularly influential movement in that country in that time period. As an illustration, it seems likely that the peak in India in the 1950s would be from the movies of Satyajit Ray who is widely considered the greatest film maker in Indian history. Similarly it seems likely that the peak in Sweden in the 1960s would be largely the result of Ingmar Bergman movies. Notable exceptions to this trend include the UK, the USA, France.

###Analysis of Voters
While looking at the top directors, I became interested in the distribution of voters among countries. 

I started off by plotting a chart of the number of votes from each country.



```{r  message=FALSE, warning=FALSE}
ggplot(aes(x=country), 
       data=critic_data) +
  geom_bar() +
  ggtitle("Votes by Country")+
  theme(axis.text.x=element_blank())+
  scale_x_discrete(breaks=NULL) +
  ylab("votes")
```
This graph shows the vast disparity in votes by country, but is not particularly satisfying. I decided to reorder the countries from most to fewest votes to get a better idea of the distribution of votes. 

I first aggregated the groups into the number of groups per country
```{r  message=FALSE, warning=FALSE}
voter_groups <- group_by(critic_data, country)
votersbyCountry <- summarise(voter_groups,
                             Totals = n())
```

I then plotted the number of votes from each country. Since each voter has 10 votes, it can be assumed that the number of votes is simply 10 times the number of voters.

```{r  message=FALSE, warning=FALSE}
ggplot(aes(x=reorder(country, -Totals),
           y=Totals), 
       data=votersbyCountry) +
  geom_point(stat="identity") +
  ggtitle("Votes Originating in Each Country") +
  ylab("Number of Votes") +
  xlab("Each point represents a country") +
  theme(axis.text.x=element_blank())+
  scale_x_discrete(breaks=NULL)
```

From this chart, it is very clear that the votes are dominated by a very small number of countries.

```{r  message=FALSE, warning=FALSE}
#cuts votes variable into a factor
cuts <- 
  cut(votersbyCountry$Totals, 
      breaks = c(0,10,100,1000,10000))
table(cuts)
```

This table also makes it clear that there are many countries with nearly 0 votes and close a few countries with hundreds of votes. 


I wanted to get a closer look at what countries had the most votes so I replotted with only countries representing the top quintile of voting countries.

```{r  message=FALSE, warning=FALSE}
top_vote_countries <- 
  subset(votersbyCountry, 
         Totals >= quantile(Totals,0.8))
ggplot(aes(y=reorder(country,-Totals), 
           x=Totals), 
       data=top_vote_countries) +
  geom_point()+ 
  ggtitle("Top 20% Countries with most votes")+
  xlab("Number of Votes")+
  ylab("Country")
```

This plot shows that the UK and the US have by far the most votes. It makes sense that the UK has so many votes as Sight and Sound is a publication based in the UK. It's also unsurprising that the US has so many votes since the US in general represents such a large percentage of the global film industry. It's notable that this list is dominated by Europe and English speaking countries. Out of the top 20% only 9 out of the 29 are outside of these regions. 

###Analysis of Director Votes by Country
Seeing the large variance in vote numbers between countries, I was curious to see how homogeneous rankings of various directors were between countries. For example, Alfred Hitchcock is considered the greatest director when we aggregate across all voters, but is he considered the greatest director by voters in Germany? 

The first thing I did was group by director.

```{r  message=FALSE, warning=FALSE}
director_groups <- group_by(critic_data, selectionDirector)
votesbyDirector <- summarise(director_groups,
                             Totals = n())
```

The first thing I wanted to see was the overall distribution of votes for different directors. I ordered the directors from in the order of votes to make the overall distribution of votes clearer.


```{r  message=FALSE, warning=FALSE}
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals), 
       data=votesbyDirector) +
  geom_point(alpha=0.5)+ 
  theme(axis.text.x=element_blank())+
  scale_x_discrete(breaks=NULL)+
  ggtitle("Distribution of Votes by Director")+
  ylab("Number of Votes")+
  xlab("Each vote represents a director")
```
From this plot, it's clear that most directors receive only a few votes, but the top few directors receive a number of votes an order of magnitude or more higher than the number of votes that go to the median director.  

I next wanted to see who the top directors were and how many votes they got. I took the top 2.5% of directors by number of votes and created an ordered chart.

```{r  message=FALSE, warning=FALSE}
top_20_director <- 
  subset(votesbyDirector, 
         Totals >= quantile(Totals,0.975))
ggplot(aes(y=reorder(selectionDirector,-Totals), 
           x=Totals), 
       data=top_20_director) +
  geom_point()+ 
  ggtitle("Top 2.5% Most Voted For Directors")+
  xlab("Number of Votes")+
  ylab("Director")
```
Unsurprisingly, the labels on the y-axis include many of the most famous directors of all time. We already saw earlier when we tabulated the data that Alfred Hitchcock, Jean-Luc Godard, and Orson Welles each had several hundred votes. Interestingly, even within this limited range of extremely famous directors, the number of votes received by the top ranked Alfred Hitchcock is nearly four times higher than the number of votes received by Francois Truffaut ranked 29th. 

Looking at this list, it's also clear that these top directors are all male and largely hail from Europe and the United States. Of the top 10 directors by votes received, the only one from outside of these regions is Yasujiro Ozu from Japan. In fact, out of these top 29 directors, there are no directors that hail from outside Europe, the United States, and Japan. This result makes sense when I think back to the distribution of voters. The voters were heavily North American and European, and it makes sense to assume that critics would have a tendency to vote for movies they are culturally familiar with. In addition, in general, Europe, the United States, and Japan had thriving film industries earlier than countries in other parts of the world. Since it appears to take a few decades before a given movie is considered great, it would make sense that countries that have produced more high quality relatively recently, like China, would not yet be on this list. Perhaps in years to come, countries like China, Korea, India, Iran, Mexico, and Brazil, each with a thriving cinema culture will be featured more prominently on this kind of ranking. 

In addition to the number of votes, I decided it would be interesting to see what decades each of these directors was most active in. In order to do this, I created a variable called Active_Decade by taking the median of the decade variable created earlier for each director. While this is not a perfect representation of a given director's most active decades, it gives a good idea of when a director made most of his movies. 

```{r  message=FALSE, warning=FALSE}
#group by directors
director_groups <- 
  group_by(critic_data, selectionDirector)
#aggregates the data by director adding the Active_Decade variable
votesbyDirector <- summarise(director_groups,
                             Active_Decade = median(decade),
                             Totals = n())
#convert Active_Decade into a factor for future use
votesbyDirector$Active_Decade<- 
  as.factor(votesbyDirector$Active_Decade)
#subset data and keep the top 2.5% of directors by number of votes
top_director <- 
  subset(votesbyDirector, Totals >= quantile(Totals,0.975))
#Create chart
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals, 
           color=Active_Decade, 
           fill=Active_Decade), 
       data=top_director) +
  geom_point(size = 4)+ 
  geom_bar(stat="identity", width=0.1) +
  ggtitle("Top 2.5% Most Voted For Directors")+
  ylab("Number of Votes")+
  xlab("Director")+
  scale_color_brewer(palette = "Paired")+
  scale_fill_brewer(palette = "Paired")+
  coord_flip()

```

This chart echoes the histogram of movie distribution by decade in that directors from the 1950s, 1960s, and 1970s are most common. From this chart we can also see that David Lynch is the most recent director in this group while Sergei Eisenstein and F.W. Murnau from the silent era are the oldest.

Next I thought it might be interesting to look at this data for a few countries with a significant number of votes. I started with Spain because it had the third highest number of voters but speaks a different language from the US and the UK which have the first and second highest number of voters. I created the chart with the code below.

```{r  message=FALSE, warning=FALSE}
#create a subset of the data with only voters from spain
Spain.votes <- 
  subset(critic_data, country=="Spain")
#group the data in spain by director
director.spain_groups <- 
  group_by(Spain.votes, selectionDirector)
#summarise the data for spain
votesbyDirectorSpain <- 
  summarise(director.spain_groups,
                             Active_Decade = median(decade),
                             Totals = n())
#subset the data to get only the top directors
votesbyDirectorSpain.Top <- 
  subset(votesbyDirectorSpain, 
         Totals >= quantile(Totals,0.9))
#converts to factor
votesbyDirectorSpain.Top$Active_Decade <- 
  as.factor(votesbyDirectorSpain.Top$Active_Decade)
#create chart
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals, 
           color=Active_Decade, 
           fill=Active_Decade), 
       data=votesbyDirectorSpain.Top) +
  geom_point(size=5)+ 
  geom_bar(stat="identity", width=0.1) +
  ggtitle("Distribution of Spanish Votes by Director")+
  xlab("Number of Votes")+
  ylab("Each vote represents a director")+
  scale_color_brewer(palette = "Dark2")+
  scale_fill_brewer(palette = "Dark2")+
  coord_flip()
```

Interestingly, in Spain, we see that John Ford, most famous for his Westerns came out with the most votes. Unsurprisingly, Luis Bunuel, a very famous Spanish director comes in second despite being ranked 15th in the overall poll. 

In order to create charts for other countries, I decided to try writing an R function.

```{r  message=FALSE, warning=FALSE}
top.directors.countries <- 
  function(data, country.name, percentile) {
  votes <- subset(data, country.name==country)
  director.groups <- group_by(votes, selectionDirector)
  votesbyDirector <- summarise(director.groups,
                               Active_Decade = median(decade),
                               Totals = n())
  votesbyDirector.Top <- 
    subset(votesbyDirector, 
           Totals >= quantile(Totals, percentile))
  votesbyDirector.Top$Active_Decade<-
    as.factor(votesbyDirector.Top$Active_Decade)
  return(data.frame(votesbyDirector.Top)) 
} 
```
I then applied it to France.

```{r  message=FALSE, warning=FALSE}
France.directors <- 
  top.directors.countries(critic_data, "France", 0.85)
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals, 
           color=Active_Decade, 
           fill=Active_Decade), 
       data=France.directors) +
  geom_point(size=5)+ 
  geom_bar(stat="identity", width=0.1) +
  ggtitle("Distribution of French Votes by Director")+
  xlab("Directors")+
  ylab("Number of Votes")+
  scale_color_brewer(palette = "Paired")+
  scale_fill_brewer(palette = "Paired")+
  coord_flip()
```

Compared to many of the other countries, French voters seem to have voted for directors from a wide range of decades. 

To be fair to the UK, I decided to include them in the fun.

```{r  message=FALSE, warning=FALSE}
UK.directors <- 
  top.directors.countries(critic_data, "UK", 0.95)
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals, 
           color=Active_Decade, 
           fill=Active_Decade), 
       data=UK.directors) +
  geom_point(size=5)+ 
  geom_bar(stat="identity", width=0.1) +
  ggtitle("Distribution of UK Votes by Director")+
  xlab("Directors")+
  ylab("Number of Votes")+
  scale_color_brewer(palette = "Paired")+
  scale_fill_brewer(palette = "Paired")+
  coord_flip()
```

Most notable for voters in the UK is the high ranking of Powell and Pressburger, a famous British directing duo famous for classic movies like The Red Shoes and Black Narcissus.

At this point I decided to round out the top five voting countries.

```{r  message=FALSE, warning=FALSE}
US.directors <- 
  top.directors.countries(critic_data, "US", 0.93)
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals, 
           color=Active_Decade, 
           fill=Active_Decade), 
       data=US.directors) +
  geom_point(size=5)+ 
  geom_bar(stat="identity", width=0.1) +
  ggtitle("Distribution of US Votes by Director")+
  xlab("Directors")+
  ylab("Number of Votes")+
  scale_color_brewer(palette = "Paired")+
  scale_fill_brewer(palette = "Paired")+
  coord_flip()

Germany.directors <- 
  top.directors.countries(critic_data, "Germany", 0.85)
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals, 
           color=Active_Decade, 
           fill=Active_Decade), 
       data=Germany.directors) +
  geom_point(size=5)+ 
  geom_bar(stat="identity", width=0.1) +
  ggtitle("Distribution of German Votes by Director")+
  xlab("Directors")+
  ylab("Number of Votes")+
  scale_color_brewer(palette = "Paired")+
  scale_fill_brewer(palette = "Paired")+
  coord_flip()
```

###Stability of Director Rankings Across Countries

At this point, as I stated at the start of this section, I would like to see how stable these rankings are between countries.

I first reagreggated the data by Director and the country of the voter who voted for that director. This creates a dataset with the total number of votes for each director from each country.

```{r  message=FALSE, warning=FALSE}
director.country.groups <- 
  group_by(critic_data, selectionDirector, country)
votes.by.director.country <- 
  summarise(director.country.groups,
            Totals = n())
```

Since each country has a different number of votes, I had to find a way to normalize the votes across countries. I could have converted the votes that each director received into a share of votes, but I decided that ranking the directors within the country might serve me better. I would lose the relative magnitude of the votes by doing this, but I would gain some clarity.

I ranked the directors in each country, and then decided that I wanted to only look at directors in the top 1 percentile of the overall vote. I accomplished this with the code below. 

```{r  message=FALSE, warning=FALSE}
#Adds a column that ranks directors from most to least number of votes by country
votes.by.director.country <- 
  transform(votes.by.director.country, 
            director.rank = ave(Totals, country, 
                                FUN = function(x) rank(-x, ties.method = "first")))

#creates a subset of the top percentile of directors by vote count
top.1.perc.director <- 
  subset(votesbyDirector, Totals >= quantile(Totals,0.99))
#converts the column of directors in top.1.perc.director into a vector
directors <- 
  top.1.perc.director[['selectionDirector']]
#creates a boolean vector with TRUE representing all directors in the list directors
keep <- 
  apply(votes.by.director.country,1,function(x) any(x %in% directors))
#uses the boolean vector to subset the data, keeping only True values
top.votes.by.director.country <- 
  votes.by.director.country[keep,]
#converts selectionDirector into a factor for future use
top.votes.by.director.country$selectionDirector <- 
  as.factor(top.votes.by.director.country$selectionDirector) 
```

I first tried plotting the ranks of all directors against the critics of all countries. The results are obviously completely unreadable.

```{r  message=FALSE, warning=FALSE}
ggplot(aes(x=country, 
           y=director.rank, 
           color=selectionDirector, 
           group=1),
       data=top.votes.by.director.country) +
  geom_line()
```

I next decided to flip the graph and focus only on the number one director: Alfred Hitchcock. I reordered the countries by Hitchcock's rankings so that I would be able to see a trend.

```{r  message=FALSE, warning=FALSE}
#So I thought I might look director by director starting at the top
ggplot(aes(x=reorder(country, director.rank), 
           y=director.rank, 
           group=1), 
       data=subset(top.votes.by.director.country,
                   selectionDirector == "Alfred Hitchcock")) +
         geom_line() + 
         coord_flip() +  
  ggtitle("Rankings of Alfred Hitchcock across countries")+
  xlab("Ranking") +
  ylab("Country")
```

We can see that there is a fairly wide variance in the ranking of Hitchcock with him being ranked first in many countries, but also being ranked 15th in Japan and even lower in China. Still, It looks like around half of countries would place him in the top 5. 

I thought it would be interesting to get a similar snapshot of other directors.

```{r  message=FALSE, warning=FALSE}
ggplot(aes(x=reorder(country, director.rank), 
           y=director.rank, 
           group=1), 
       data=top.votes.by.director.country) +
  geom_line(color='black') +
  coord_flip() +
  facet_wrap(~selectionDirector) +
  theme(axis.text.x=element_blank())+
  scale_x_discrete(breaks=NULL) +
  xlab("Director Rank") +
  ylab("Country")+
  ggtitle("Relative rankings of top directors across countries")
```

I can see here that some directors have much more variability than others. In fact, Alfred Hitchcock appears to have much lower amounts of variation than other directors.

As I looked at this data, it occured to me that one significant problem with countries with a smaller number of votes might be that individual reviews' preferences might have an undue influence. In particular, if one voter in a ten person sample has quirky tastes, that will be much more prevalent in the national aggregate than if one voter in 500 has quirky tastes. Put another way, more voters would more accurately reflect national tastes, and at some point, too small a number of voters might not reflect national tastes at all. To this end, I decided to perform this analysis again with only the top 10 countries with the most voters.

I used the code below to subset the data.

```{r  message=FALSE, warning=FALSE}
#creates a data set with only the names of the top countries
top_10_countries <- 
  subset(votersbyCountry, Totals >= 
           quantile(Totals,0.935))[['country']]
#finds the countries in the list created above in the top.votes.by.director.country and creates an boolean array indicating which cells to keep
keep <- 
  apply(top.votes.by.director.country,1,
        function(x) any(x %in% top_10_countries))
#applies the boolean array to top.votes.by.director.country to keep only the TRUE values
top.votes.by.director.country <- 
  top.votes.by.director.country[keep,]
```

I then repeated the previous plot with the smaller number of countries.

I was hoping to get them all onto a single line chart, but the results were not good.

```{r  message=FALSE, warning=FALSE}
ggplot(aes(country, director.rank, 
           group = selectionDirector, 
           color=selectionDirector), 
       data=top.votes.by.director.country)+
  geom_line()+
  coord_cartesian(ylim = c(0,40))
```

Instead I tried a faceted graph.

```{r  message=FALSE, warning=FALSE}
ggplot(aes(x=reorder(country, director.rank), 
           y=director.rank, 
           group=1,
           color=country), 
       data=top.votes.by.director.country) +
  geom_line(color='black') + 
  geom_point(size=5) +
  coord_flip() +
  facet_wrap(~selectionDirector) +
  xlab("Director Rank") +
  ylab("Country")+
  ggtitle("Relative rankings of top directors across countries")
```

I found it very difficult to see how each point matched up to its country and so I added some stripes to the background.

```{r  message=FALSE, warning=FALSE}
#creates a dataframe with the cutoffs for the different colors in the background of the chart
rects <- 
  data.frame(xstart = seq(0.5,9.5,1), 
             xend = seq(1.5,10.5,1), 
             col = c("US","UK","Sweden","Spain","Italy","Germany","France","Canada","Australia","Argentina"))

#creates the chart
ggplot() +
  geom_point(data=top.votes.by.director.country, 
             aes(x=country, 
                 y=director.rank, 
                 group=1)) +
  geom_line(data=top.votes.by.director.country, 
            color='black', 
            aes(x=country, 
                y=director.rank, 
                group=1)) +
  #This line draws a series of rectangles on the plot to create the striped background.
  geom_rect(data=rects,
            aes(ymin=0,
                ymax=80,
                xmin=xstart,
                xmax=xend,
                fill=col), 
            alpha=0.5) +
  coord_flip() +
  facet_wrap(~selectionDirector) +
  theme(legend.position="none") +
  scale_fill_brewer(palette = "Set3") +
  ggtitle("Director Vote Rank Across Countries")+
  xlab("Rank")+
  ylab("Country")
```

There is a wealth of interesting information in this comparison. First and foremost, we can see that among this smaller set of countries, both Alfred Hitchcock and Jean-Luc Godard, overall ranked 1 and 2 respectively, have a very low level of variation between countries. At least in this set of voters, they seem to be widely considered to be great directors. Orson Welles, on the other hand, has a very significant amount of variation, but is very highly regarded in the US and UK which have a very high number of votes. In other cases, there are some directors that extremely low in a few countries. Ingmar Bergman ranks over 50th in Germany, Robert Bresson ranks 80th in Italy, and Stanly Kubrick ranks nearly 60th in Argentina. 

There is also some evidence that voters from a given country favor directors from their country. Federico Fellini ranks highest in his Native Italy and Ingmar Bergman ranks first in his native Sweden. Jean Renoir, from France, is ranked highest in his home country.

#Final Plots and Summary


###Plot 1

```{r  message=FALSE, warning=FALSE}
top_vote_countries <- 
  subset(votersbyCountry, Totals >= quantile(Totals,0.8))
ggplot(aes(y=reorder(country,-Totals), 
           x=Totals), 
       data=top_vote_countries) +
  geom_point()+ 
  ggtitle("Number of Votes Originating in Each Country - Top Quintile")+
  xlab("Number of Votes")+
  ylab("Country")
```

*Please note that the analysis of this chart is a modified version of an earlier section in this report. 

This plot shows that the UK and the US have by far the most votes. It makes sense that the UK has so many votes as Sight and Sound is a publication based in the UK. It's also unsurprising that the US has so many votes since the US in general represents such a large percentage of the global film industry. It's notable that this list is dominated by Europe and English speaking countries. Out of the countries with the top 20% highest number of votes, only 9 out of the 29 are outside of these regions. 

This distribution has significant implications for the meaning of the poll. It means that the overall ranking of the movies, published in Sight and Sound Magazine in 2012, is largely representative of the opinions of film professionals in the UK and the US. While the opinions of voters from across the world were taken into account, in the end it would be safe to say that a film that is not popular in the UK or US would not make it to a very high position on this list no matter how popular it might be everywhere else. Put another way, the results of this poll are heavily weighted towards the tastes of film professionals in the US and UK.  


###Plot 2
```{r  message=FALSE, warning=FALSE}
ggplot(aes(x=reorder(selectionDirector,-Totals), 
           y=Totals, 
           color=Active_Decade, 
           fill=Active_Decade), 
       data=top_director) +
  geom_point(size = 4)+ 
  geom_bar(stat="identity", width=0.1) +
  ggtitle("Top 2.5% Most Voted For Directors")+
  ylab("Number of Votes")+
  xlab("Director")+
  scale_color_brewer(palette = "Paired")+
  scale_fill_brewer(palette = "Paired")+
  coord_flip()

```

*Please note that the analysis of this chart is a modified version of an earlier section in this report. 

Unsurprisingly, the labels on the y-axis include many of the most famous directors of all time. We already saw earlier when we tabulated the data that Alfred Hitchcock, Jean-Luc Godard, and Orson Welles each had several hundred votes. Interestingly, even within this limited range of extremely famous directors, the number of votes received by the top ranked Alfred Hitchcock is nearly four times higher than the number of votes received by Francois Truffaut ranked 29th. 

Looking at this list, it's also clear that these top directors are all male and largely hail from Europe and the United States. Of the top 10 directors by votes received, the only one from outside of these regions is Yasujiro Ozu from Japan. In fact, out of these top 29 directors, there are no directors that hail from outside Europe, the United States, and Japan. This result makes sense when I think back to the distribution of voters. The voters were heavily North American and European, and it makes sense to assume that critics would have a tendency to vote for movies they are culturally familiar with. In addition, in general, Europe, the United States, and Japan had thriving film industries earlier than countries in other parts of the world. Since it appears to take a few decades before a given movie is considered great, it would make sense that countries that have produced more high quality relatively recently, like China, would not yet be on this list. Perhaps in years to come, countries like China, Korea, India, Iran, Mexico, and Brazil, each with a thriving cinema culture will be featured more prominently on this kind of ranking. 

This chart also echoes the histogram of movie distribution by decade in that directors from the 1950s, 1960s, and 1970s are most common. From this chart we can also see that David Lynch is the most recent director in this group while Sergei Eisenstein and F.W. Murnau from the silent era are the oldest.

###Plot 3

```{r  message=FALSE, warning=FALSE}
ggplot() +
  geom_point(data=top.votes.by.director.country, 
             aes(x=country, 
                 y=director.rank, 
                 group=1)) +
  geom_line(data=top.votes.by.director.country, 
            color='black', 
            aes(x=country, 
                y=director.rank, 
                group=1)) +
  #This line draws a series of rectangles on the plot to create the striped background.
  geom_rect(data=rects,
            aes(ymin=0,
                ymax=80,
                xmin=xstart,
                xmax=xend,
                fill=col), 
            alpha=0.5) +
  coord_flip() +
  facet_wrap(~selectionDirector) +
  theme(legend.position="none") +
  scale_fill_brewer(palette = "Set3") +
  ggtitle("Director Vote Rank Across Countries")+
  xlab("Rank")+
  ylab("Country")
```

*Please note that the analysis of this chart is a modified version of an earlier section in this report. 

There is a wealth of interesting information in this comparison. First and foremost, we can see that among this smaller set of countries, both Alfred Hitchcock and Jean-Luc Godard, overall ranked 1 and 2 respectively, have a very low level of variation between countries. At least in this set of voters, they seem to be widely considered to be great directors. Orson Welles, on the other hand, has a very significant amount of variation, but is very highly regarded in the US and UK which have a very high number of votes. In other cases, there are some directors that extremely low in a few countries. Ingmar Bergman ranks over 50th in Germany, Robert Bresson ranks 80th in Italy, and Stanly Kubrick ranks nearly 60th in Argentina. 

There is also some evidence that voters from a given country favor directors from their country. Federico Fellini ranks highest in his Native Italy and Ingmar Bergman ranks first in his native Sweden. Jean Renoir, from France, is ranked highest in his home country.


#Reflection

I feel as though I have only touched the tip of the iceberg when it comes to analyzing this data. In particular, in this report, I largely focused on Directors and largely ignored the wealth of data on individual movies. It took a significant amount of time and effort to prepare and then analyze this data, but the process was highly enjoyable, particularly because I have an interest in the topic. Every insight I gleaned from the data created an itch to analyze further and deeper.

###Challenges

The most challenging part of this project was acquiring the data. Since the BFI does not have it's data in a readily analyzable format, I had to polish some of my screen scraping skills learned in an earlier course. One of the greatest difficulties involved merging the BFI dataset with the data from the OMDBAPI. The titles of the movies were often inputted differently in the two databases, and this meant that I had to manually create a dictionary that matched the title in one database to the title in another. Another difficulty I encountered in this phase was the presence of multiple movies with the same title. As I tried to extract data from OMDBAPI using titles I had extracted from the BFI database, I would often find that OMDBAPI would find another movie with the same title. Even worse, when I tried to search in OMDBAPI by title and year of production, I found that many times the years would not be the same. Luckily these cases were rare, but it required some inelegant coding on my part to accomodate these situations. Once the data was downloaded, I also had multiple decisions to make about how to format the data. In particular, fields with multiple values were particularly difficult to deal with. The Genre variable, which in the end I never analyzed, might mark a movie as both a Drama and a Comedy. In order to deal with this kind of data, I had to learn to convert these fields into a large number of dummy variables. 

A second challenge involved generating calculated fields from the data once it was in R. In particular, calculating director ranks by country turned out to be particularly challenging. 

Finally, putting the data into an easily readable visual format was a challenge. When working with this number of directors and countries, I had to put some significant thought into how best to communicate my findings. Sometimes this involved the use of color, as in the "Director Vote Rank Across Countries" while at other times it involved reordering the points on the charts to make a distribution clearer as I did in "Number of Votes Originating in Each Country - Top Quintile"

###Ideas on Future Analysis

There are several directions that I would like to take the analysis of this data in the future. First, I would be interested in reweighting this data so that I might see a ranking that is more reflective of international tastes. For example, I could imagine converting votes in each country into shares of the total vote. Aggregating this data would equally weight voters from all countries. Alternately, it might be interesting to weight by country population to get a very rough proxy of global film tastes.

With the directors, I would also be interested in finding out how important individual directors are in the film culture of a given country. More specifically, I would be interested in seeing whether individual countries' film cultures defined by a large group of people or by a handful of auteurs? For example, of all of the votes that went to Japanese directors, what percentage went to Akira Kurosawa? I suspect that there are a few highly influential directors and a long tail of directors that receive a vote or two.

I would also be interested in performing a country by country analysis of the popularity of individual movies. These analyses would be a more fine grained version of the analyses conducted at the director level.

Finally, it would be interesting to look at the popularity of genres. The dataset includes data on the genre of each movie. It would be fascinating to see how different genres fare in different decades and in different countries. Were the 1950s a golden age for comedies in Germany? This data might help to answer such questions. 